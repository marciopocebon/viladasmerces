function MongoJSCategory(){this._super=new MongoJS("merces"),this.collectionName="category"}function MongoJS(a){this.mongoClient=new MongoClient(new Server("localhost",27017)),this.db=null,this.dbName=a,this.collections={categories:"category",places:"places",users:"users"}}var MongoJS=require("../libs/mongo").MongoJS;MongoJSCategory.prototype.add=function(a,b){var c=this,d=a;c._super.insert(d,c.collectionName,function(a){b(a)})},MongoJSCategory.prototype.remove=function(a,b){var c=this,d=a;c._super.remove(d,c.collectionName,function(a){b(a)})},MongoJSCategory.prototype.list=function(a){var b=this;b._super.findAll(b.collectionName,function(b){a(b)})},exports.MongoJSCategory=MongoJSCategory;var mongodb=require("mongodb"),MongoClient=mongodb.MongoClient,Server=mongodb.Server;MongoJS.prototype._open=function(a){var b=this;b.mongoClient.open(function(c){return c?(console.log(c),b._close(),!1):(b.db=b.mongoClient.db(b.dbName),console.log("database on"),a(!0),void 0)})},MongoJS.prototype._close=function(){var a=this;a.mongoClient.close(),console.log("database off")},MongoJS.prototype.insert=function(a,b,c){var d=this,b=b,e=a;d._open(function(){d.db.collection(b,function(a,b){return a?(console.log(a),d._close(),!1):(b.save(e,{safe:!0},function(a){return a?(console.log(a),d._close(),!1):(d._close(),c(!0),void 0)}),void 0)})})},MongoJS.prototype.remove=function(a,b,c){var d=this,b=b,e=a;d._open(function(){d.db.collection(b,function(a,b){return a?(console.log(a),d._close(),!1):(b.remove(e,!0,function(a){return a?(console.log(a),d._close(),!1):(d._close(),c(!0),void 0)}),void 0)})})},MongoJS.prototype.findAll=function(a,b){var c=this,a=a;c._open(function(d){return d?(c.db.collection(a,function(a,d){return a?(console.log(a),c._close(),!1):(d.find().toArray(function(a,d){return a?(console.log(a),c._close(),!1):(b(d),c._close(),void 0)}),void 0)}),void 0):(console.log("erro no retorno da open"),!1)})},MongoJS.prototype.find=function(a,b,c){var d=this,e=a,b=b;d._open(function(a){return a?(d.db.collection(b,function(a,b){return a?(console.log(a),d._close(),!1):(b.find(e).toArray(function(a,b){return a?(console.log(a),d._close(),!1):(d._close(),c(b),void 0)}),void 0)}),void 0):(console.log("erro no retorno da open"),!1)})},exports.MongoJS=MongoJS;